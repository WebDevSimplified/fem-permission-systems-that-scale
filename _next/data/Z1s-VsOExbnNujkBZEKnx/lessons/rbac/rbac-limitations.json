{"pageProps":{"post":{"attributes":{"title":"RBAC Limitations"},"html":"<p>Let&#39;s summarize when RBAC works well and when you should consider alternatives.</p>\n<h2>Where RBAC Excels</h2>\n<p>RBAC is the right choice when your permissions are:</p>\n<table>\n<thead>\n<tr>\n<th>Characteristic</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>Role-centric</strong></td>\n<td>&quot;Admins can delete, viewers can read&quot;</td>\n</tr>\n<tr>\n<td><strong>Static</strong></td>\n<td>Permissions don&#39;t change based on context</td>\n</tr>\n<tr>\n<td><strong>Coarse-grained</strong></td>\n<td>A few roles cover all use cases</td>\n</tr>\n<tr>\n<td><strong>Limited Attribute Awareness</strong></td>\n<td>Permissions depend on few or no resource attributes or context</td>\n</tr>\n</tbody></table>\n<h2>Where RBAC Struggles</h2>\n<p>RBAC breaks down when permissions depend on:</p>\n<h3>1. Attributes Other Than User Role</h3>\n<p>As soon as you need to create multiple permutations of permissions for different attributes (e.g., ownership, document status), RBAC starts to struggle. You end up creating very specific permissions like <code>&quot;document:update:own-unlocked-draft&quot;</code> to cover each combination which quickly becomes unmanageable.</p>\n<h3>5. Environmental Factors</h3>\n<p>With RBAC it is impossible to take into consideration environmental factors such as time of day, location, or other contextual information that may play a role in determining access. For example, a user may only be able to push code to production during certain hours or from specific IP addresses.</p>\n<h2>The Symptom: Permission Explosion</h2>\n<p>When RBAC is the wrong fit, you&#39;ll notice your permission list growing uncontrollably:</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-comment\">// Started simple</span>\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Permission</span> = <span class=\"hljs-string\">&quot;document:read&quot;</span> | <span class=\"hljs-string\">&quot;document:update&quot;</span> | <span class=\"hljs-string\">&quot;document:delete&quot;</span>\n\n<span class=\"hljs-comment\">// Then requirements came in...</span>\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Permission</span> =\n  | <span class=\"hljs-string\">&quot;document:read:all&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:read:own&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:read:non-draft&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:read:published&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:update:all&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:update:unlocked&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:update:own&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:update:own-unlocked&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:update:own-unlocked-draft&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:delete:all&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:delete:own&quot;</span>\n<span class=\"hljs-comment\">// ... and it keeps growing</span>\n</code></pre><h2>The Hybrid Trap</h2>\n<p>When teams hit RBAC limits, they often create hybrids:</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-comment\">// &quot;RBAC&quot; that&#x27;s actually policy functions</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">canUpdateDocument</span>(<span class=\"hljs-params\">user, <span class=\"hljs-variable language_\">document</span></span>) {\n  <span class=\"hljs-keyword\">if</span> (user.<span class=\"hljs-property\">role</span> === <span class=\"hljs-string\">&quot;admin&quot;</span>) <span class=\"hljs-keyword\">return</span> !<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">isLocked</span>\n  <span class=\"hljs-keyword\">if</span> (user.<span class=\"hljs-property\">role</span> === <span class=\"hljs-string\">&quot;editor&quot;</span>) <span class=\"hljs-keyword\">return</span> !<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">isLocked</span>\n  <span class=\"hljs-keyword\">if</span> (user.<span class=\"hljs-property\">role</span> === <span class=\"hljs-string\">&quot;author&quot;</span>) {\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">creatorId</span> === user.<span class=\"hljs-property\">id</span> &amp;&amp;\n      !<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">isLocked</span> &amp;&amp;\n      <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">status</span> === <span class=\"hljs-string\">&quot;draft&quot;</span>\n    )\n  }\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n}\n</code></pre><p>This works, but:</p>\n<ul>\n<li>You&#39;ve abandoned the simplicity of RBAC</li>\n<li>Permission logic is scattered across helper functions</li>\n<li>The <code>can(user, permission)</code> pattern is inconsistent</li>\n<li>You&#39;re essentially hand-building ABAC without the structure</li>\n</ul>\n<h2>When to Graduate from RBAC</h2>\n<p>Consider moving beyond RBAC when you find yourself:</p>\n<ol>\n<li><p><strong>Creating permission names with multiple conditions</strong></p>\n<ul>\n<li><code>&quot;document:update:own-unlocked-draft&quot;</code> is a red flag</li>\n</ul>\n</li>\n<li><p><strong>Writing helper functions for every permission check</strong></p>\n<ul>\n<li>If <code>canDoX(user, resource)</code> is the norm, RBAC isn&#39;t helping</li>\n</ul>\n</li>\n<li><p><strong>Duplicating attribute checks across the codebase</strong></p>\n<ul>\n<li>The same <code>document.isLocked</code> check appearing everywhere</li>\n</ul>\n</li>\n<li><p><strong>Struggling to explain permissions to new team members</strong></p>\n<ul>\n<li>&quot;Well, editors can update documents, except when...&quot;</li>\n</ul>\n</li>\n<li><p><strong>Needing different permissions for the same action based on context</strong></p>\n<ul>\n<li>Same &quot;edit&quot; action has different rules for drafts vs published</li>\n</ul>\n</li>\n</ol>\n<h2>The Path Forward</h2>\n<p>In the next section, we&#39;ll implement <strong>ABAC</strong> and see how it elegantly handles the requirements that broke our RBAC system. ABAC is more work to set up initially, but it scales much better for complex, attribute-driven access control scenarios.</p>\n","markdown":"\nLet's summarize when RBAC works well and when you should consider alternatives.\n\n## Where RBAC Excels\n\nRBAC is the right choice when your permissions are:\n\n| Characteristic                  | Example                                                        |\n| ------------------------------- | -------------------------------------------------------------- |\n| **Role-centric**                | \"Admins can delete, viewers can read\"                          |\n| **Static**                      | Permissions don't change based on context                      |\n| **Coarse-grained**              | A few roles cover all use cases                                |\n| **Limited Attribute Awareness** | Permissions depend on few or no resource attributes or context |\n\n## Where RBAC Struggles\n\nRBAC breaks down when permissions depend on:\n\n### 1. Attributes Other Than User Role\n\nAs soon as you need to create multiple permutations of permissions for different attributes (e.g., ownership, document status), RBAC starts to struggle. You end up creating very specific permissions like `\"document:update:own-unlocked-draft\"` to cover each combination which quickly becomes unmanageable.\n\n### 5. Environmental Factors\n\nWith RBAC it is impossible to take into consideration environmental factors such as time of day, location, or other contextual information that may play a role in determining access. For example, a user may only be able to push code to production during certain hours or from specific IP addresses.\n\n## The Symptom: Permission Explosion\n\nWhen RBAC is the wrong fit, you'll notice your permission list growing uncontrollably:\n\n```typescript\n// Started simple\ntype Permission = \"document:read\" | \"document:update\" | \"document:delete\"\n\n// Then requirements came in...\ntype Permission =\n  | \"document:read:all\"\n  | \"document:read:own\"\n  | \"document:read:non-draft\"\n  | \"document:read:published\"\n  | \"document:update:all\"\n  | \"document:update:unlocked\"\n  | \"document:update:own\"\n  | \"document:update:own-unlocked\"\n  | \"document:update:own-unlocked-draft\"\n  | \"document:delete:all\"\n  | \"document:delete:own\"\n// ... and it keeps growing\n```\n\n## The Hybrid Trap\n\nWhen teams hit RBAC limits, they often create hybrids:\n\n```typescript\n// \"RBAC\" that's actually policy functions\nexport function canUpdateDocument(user, document) {\n  if (user.role === \"admin\") return !document.isLocked\n  if (user.role === \"editor\") return !document.isLocked\n  if (user.role === \"author\") {\n    return (\n      document.creatorId === user.id &&\n      !document.isLocked &&\n      document.status === \"draft\"\n    )\n  }\n  return false\n}\n```\n\nThis works, but:\n\n- You've abandoned the simplicity of RBAC\n- Permission logic is scattered across helper functions\n- The `can(user, permission)` pattern is inconsistent\n- You're essentially hand-building ABAC without the structure\n\n## When to Graduate from RBAC\n\nConsider moving beyond RBAC when you find yourself:\n\n1. **Creating permission names with multiple conditions**\n   - `\"document:update:own-unlocked-draft\"` is a red flag\n\n2. **Writing helper functions for every permission check**\n   - If `canDoX(user, resource)` is the norm, RBAC isn't helping\n\n3. **Duplicating attribute checks across the codebase**\n   - The same `document.isLocked` check appearing everywhere\n\n4. **Struggling to explain permissions to new team members**\n   - \"Well, editors can update documents, except when...\"\n\n5. **Needing different permissions for the same action based on context**\n   - Same \"edit\" action has different rules for drafts vs published\n\n## The Path Forward\n\nIn the next section, we'll implement **ABAC** and see how it elegantly handles the requirements that broke our RBAC system. ABAC is more work to set up initially, but it scales much better for complex, attribute-driven access control scenarios.\n","slug":"rbac-limitations","title":"RBAC Limitations","section":"Role-Based Access Control (RBAC)","icon":"shield","filePath":"/home/runner/work/fem-permission-systems-that-scale/fem-permission-systems-that-scale/lessons/03-rbac/D-rbac-limitations.md","nextSlug":"/fem-permission-systems-that-scale/lessons/abac/what-is-abac","prevSlug":"/fem-permission-systems-that-scale/lessons/rbac/adding-more-permissions"}},"__N_SSG":true}