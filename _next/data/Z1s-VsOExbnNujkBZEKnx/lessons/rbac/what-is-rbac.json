{"pageProps":{"post":{"attributes":{"title":"What is RBAC?"},"html":"<p><strong>Role-Based Access Control (RBAC)</strong> is the most common permission system you&#39;ll encounter. If you&#39;ve ever assigned a user to an &quot;admin&quot; or &quot;editor&quot; role, you&#39;ve used RBAC.</p>\n<h2>The Core Concept</h2>\n<p>RBAC is built on a simple idea: <strong>permissions are assigned to roles, not users</strong>. Users are then assigned roles, and they inherit all permissions associated with those roles.</p>\n<pre><code class=\"hljs language-text\"><button class=\"copy-btn\">Copy</button>User → Role → Permissions\n</code></pre><p>Instead of asking &quot;Can this user do X?&quot;, you ask &quot;Does this user&#39;s role have permission X?&quot;</p>\n<h2>The RBAC Model</h2>\n<p>A typical RBAC implementation has three components:</p>\n<table>\n<thead>\n<tr>\n<th>Component</th>\n<th>Description</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>Users</strong></td>\n<td>The people using your system</td>\n<td>Alice, Bob</td>\n</tr>\n<tr>\n<td><strong>Roles</strong></td>\n<td>Named groups of permissions</td>\n<td>admin, editor, viewer</td>\n</tr>\n<tr>\n<td><strong>Permissions</strong></td>\n<td>Specific actions that can be performed</td>\n<td>create:document, delete:project</td>\n</tr>\n</tbody></table>\n<h2>How Permissions Flow</h2>\n<pre><code class=\"hljs language-text\"><button class=\"copy-btn\">Copy</button>┌─────────┐     ┌─────────┐     ┌──────────────────┐\n│  Alice  │─────│  admin  │─────│ create:document  │\n└─────────┘     └─────────┘     │ delete:document  │\n                                │ create:project   │\n                                │ delete:project   │\n                                └──────────────────┘\n\n┌─────────┐     ┌─────────┐     ┌──────────────────┐\n│   Bob   │─────│ viewer  │─────│ read:document    │\n└─────────┘     └─────────┘     └──────────────────┘\n</code></pre><p>Alice (admin) can create and delete anything. Bob (viewer) can only read documents. Neither user has permissions defined directly—they inherit from their roles.</p>\n<h2>Why RBAC Works</h2>\n<p>RBAC became popular for good reasons:</p>\n<h3>1. Conceptually Simple</h3>\n<p>Everyone understands roles. &quot;Make Bob an admin&quot; is clearer than &quot;Grant Bob create:document, delete:document, update:document, create:project...&quot;</p>\n<h3>2. Easy to Manage</h3>\n<p>When permissions change, you update the role once. All users with that role automatically get the new permissions.</p>\n<h3>3. Auditable</h3>\n<p>&quot;Who has delete access?&quot; → &quot;Everyone with the admin role&quot; → Easy to audit.</p>\n<h3>4. Scales with Users</h3>\n<p>Adding a new user? Assign them a role. Done. No need to configure individual permissions.</p>\n<h2>RBAC in Code</h2>\n<p>A basic RBAC implementation looks like this:</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-comment\">// Define your permissions</span>\n<span class=\"hljs-keyword\">type</span> <span class=\"hljs-title class_\">Permission</span> =\n  | <span class=\"hljs-string\">&quot;document:create&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:read&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:update&quot;</span>\n  | <span class=\"hljs-string\">&quot;document:delete&quot;</span>\n  | <span class=\"hljs-string\">&quot;project:create&quot;</span>\n  | <span class=\"hljs-string\">&quot;project:read&quot;</span>\n  | <span class=\"hljs-string\">&quot;project:update&quot;</span>\n  | <span class=\"hljs-string\">&quot;project:delete&quot;</span>\n\n<span class=\"hljs-comment\">// Map roles to permissions</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">permissionsByRole</span>: <span class=\"hljs-title class_\">Record</span>&lt;<span class=\"hljs-built_in\">string</span>, <span class=\"hljs-title class_\">Permission</span>[]&gt; = {\n  <span class=\"hljs-attr\">admin</span>: [\n    <span class=\"hljs-string\">&quot;document:create&quot;</span>,\n    <span class=\"hljs-string\">&quot;document:read&quot;</span>,\n    <span class=\"hljs-string\">&quot;document:update&quot;</span>,\n    <span class=\"hljs-string\">&quot;document:delete&quot;</span>,\n    <span class=\"hljs-string\">&quot;project:create&quot;</span>,\n    <span class=\"hljs-string\">&quot;project:read&quot;</span>,\n    <span class=\"hljs-string\">&quot;project:update&quot;</span>,\n    <span class=\"hljs-string\">&quot;project:delete&quot;</span>,\n  ],\n  <span class=\"hljs-attr\">editor</span>: [<span class=\"hljs-string\">&quot;document:read&quot;</span>, <span class=\"hljs-string\">&quot;document:update&quot;</span>],\n  <span class=\"hljs-attr\">viewer</span>: [<span class=\"hljs-string\">&quot;document:read&quot;</span>],\n}\n\n<span class=\"hljs-comment\">// Check if a user can perform an action</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">can</span>(<span class=\"hljs-params\"><span class=\"hljs-attr\">user</span>: { role: <span class=\"hljs-built_in\">string</span> }, <span class=\"hljs-attr\">permission</span>: <span class=\"hljs-title class_\">Permission</span></span>): <span class=\"hljs-built_in\">boolean</span> {\n  <span class=\"hljs-keyword\">return</span> permissionsByRole[user.<span class=\"hljs-property\">role</span>]?.<span class=\"hljs-title function_\">includes</span>(permission) ?? <span class=\"hljs-literal\">false</span>\n}\n</code></pre><p>Usage is clean and readable:</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title function_\">can</span>(user, <span class=\"hljs-string\">&quot;document:create&quot;</span>)) {\n  <span class=\"hljs-comment\">// Show create button</span>\n}\n\n<span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-title function_\">can</span>(user, <span class=\"hljs-string\">&quot;project:delete&quot;</span>)) {\n  <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">AuthorizationError</span>()\n}\n</code></pre><h2>Role Hierarchies (Optional Enhancement)</h2>\n<p>Some RBAC implementations include <strong>role hierarchies</strong>, where roles inherit from other roles:</p>\n<pre><code class=\"hljs language-text\"><button class=\"copy-btn\">Copy</button>admin → author → editor → viewer\n</code></pre><p>In this model:</p>\n<ul>\n<li><code>admin</code> has all permissions of <code>author</code> (plus admin-specific ones)</li>\n<li><code>author</code> has all permissions of <code>editor</code> (plus author-specific ones)</li>\n<li><code>editor</code> has all permissions of <code>viewer</code> (plus editor-specific ones)</li>\n</ul>\n<p>This may seem convenient, but it drastically reduces the flexibility of your RBAC system and usually doesn&#39;t scale well.</p>\n<h2>When RBAC Shines</h2>\n<p>RBAC is ideal when:</p>\n<ul>\n<li>Permissions are <strong>role-based</strong> (not resource-specific)</li>\n<li>You have a <strong>small, fixed set of roles</strong></li>\n<li>Permission logic is <strong>straightforward</strong> (no complex conditions)</li>\n<li>You need something <strong>quick to implement</strong> and <strong>easy to understand</strong></li>\n</ul>\n<h2>When RBAC Struggles</h2>\n<p>RBAC starts to break down when:</p>\n<ul>\n<li>Permissions depend on <strong>resource attributes</strong> (e.g., &quot;can edit documents they created&quot;)</li>\n<li>Permissions depend on <strong>relationships</strong> (e.g., &quot;can edit documents in projects they own&quot;)</li>\n<li>You have <strong>many roles</strong> with slight permission variations</li>\n<li>Business rules are <strong>complex and context-dependent</strong></li>\n</ul>\n<p>We&#39;ll experience these limitations firsthand later in this section.</p>\n","markdown":"\n**Role-Based Access Control (RBAC)** is the most common permission system you'll encounter. If you've ever assigned a user to an \"admin\" or \"editor\" role, you've used RBAC.\n\n## The Core Concept\n\nRBAC is built on a simple idea: **permissions are assigned to roles, not users**. Users are then assigned roles, and they inherit all permissions associated with those roles.\n\n```text\nUser → Role → Permissions\n```\n\nInstead of asking \"Can this user do X?\", you ask \"Does this user's role have permission X?\"\n\n## The RBAC Model\n\nA typical RBAC implementation has three components:\n\n| Component       | Description                            | Example                         |\n| --------------- | -------------------------------------- | ------------------------------- |\n| **Users**       | The people using your system           | Alice, Bob                      |\n| **Roles**       | Named groups of permissions            | admin, editor, viewer           |\n| **Permissions** | Specific actions that can be performed | create:document, delete:project |\n\n## How Permissions Flow\n\n```text\n┌─────────┐     ┌─────────┐     ┌──────────────────┐\n│  Alice  │─────│  admin  │─────│ create:document  │\n└─────────┘     └─────────┘     │ delete:document  │\n                                │ create:project   │\n                                │ delete:project   │\n                                └──────────────────┘\n\n┌─────────┐     ┌─────────┐     ┌──────────────────┐\n│   Bob   │─────│ viewer  │─────│ read:document    │\n└─────────┘     └─────────┘     └──────────────────┘\n```\n\nAlice (admin) can create and delete anything. Bob (viewer) can only read documents. Neither user has permissions defined directly—they inherit from their roles.\n\n## Why RBAC Works\n\nRBAC became popular for good reasons:\n\n### 1. Conceptually Simple\n\nEveryone understands roles. \"Make Bob an admin\" is clearer than \"Grant Bob create:document, delete:document, update:document, create:project...\"\n\n### 2. Easy to Manage\n\nWhen permissions change, you update the role once. All users with that role automatically get the new permissions.\n\n### 3. Auditable\n\n\"Who has delete access?\" → \"Everyone with the admin role\" → Easy to audit.\n\n### 4. Scales with Users\n\nAdding a new user? Assign them a role. Done. No need to configure individual permissions.\n\n## RBAC in Code\n\nA basic RBAC implementation looks like this:\n\n```typescript\n// Define your permissions\ntype Permission =\n  | \"document:create\"\n  | \"document:read\"\n  | \"document:update\"\n  | \"document:delete\"\n  | \"project:create\"\n  | \"project:read\"\n  | \"project:update\"\n  | \"project:delete\"\n\n// Map roles to permissions\nconst permissionsByRole: Record<string, Permission[]> = {\n  admin: [\n    \"document:create\",\n    \"document:read\",\n    \"document:update\",\n    \"document:delete\",\n    \"project:create\",\n    \"project:read\",\n    \"project:update\",\n    \"project:delete\",\n  ],\n  editor: [\"document:read\", \"document:update\"],\n  viewer: [\"document:read\"],\n}\n\n// Check if a user can perform an action\nfunction can(user: { role: string }, permission: Permission): boolean {\n  return permissionsByRole[user.role]?.includes(permission) ?? false\n}\n```\n\nUsage is clean and readable:\n\n```typescript\nif (can(user, \"document:create\")) {\n  // Show create button\n}\n\nif (!can(user, \"project:delete\")) {\n  throw new AuthorizationError()\n}\n```\n\n## Role Hierarchies (Optional Enhancement)\n\nSome RBAC implementations include **role hierarchies**, where roles inherit from other roles:\n\n```text\nadmin → author → editor → viewer\n```\n\nIn this model:\n\n- `admin` has all permissions of `author` (plus admin-specific ones)\n- `author` has all permissions of `editor` (plus author-specific ones)\n- `editor` has all permissions of `viewer` (plus editor-specific ones)\n\nThis may seem convenient, but it drastically reduces the flexibility of your RBAC system and usually doesn't scale well.\n\n## When RBAC Shines\n\nRBAC is ideal when:\n\n- Permissions are **role-based** (not resource-specific)\n- You have a **small, fixed set of roles**\n- Permission logic is **straightforward** (no complex conditions)\n- You need something **quick to implement** and **easy to understand**\n\n## When RBAC Struggles\n\nRBAC starts to break down when:\n\n- Permissions depend on **resource attributes** (e.g., \"can edit documents they created\")\n- Permissions depend on **relationships** (e.g., \"can edit documents in projects they own\")\n- You have **many roles** with slight permission variations\n- Business rules are **complex and context-dependent**\n\nWe'll experience these limitations firsthand later in this section.\n","slug":"what-is-rbac","title":"What is RBAC?","section":"Role-Based Access Control (RBAC)","icon":"shield","filePath":"/home/runner/work/fem-permission-systems-that-scale/fem-permission-systems-that-scale/lessons/03-rbac/A-what-is-rbac.md","nextSlug":"/fem-permission-systems-that-scale/lessons/rbac/converting-to-rbac","prevSlug":"/fem-permission-systems-that-scale/lessons/fixing-basic-permissions/the-case-for-better-architecture"}},"__N_SSG":true}