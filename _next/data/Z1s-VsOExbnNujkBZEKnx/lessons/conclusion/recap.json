{"pageProps":{"post":{"attributes":{"title":"Choosing the Right Permission Model"},"html":"<p>Let&#39;s recap what we&#39;ve learned and when to use each approach.</p>\n<h2>The Three Models</h2>\n<h3>RBAC (Role-Based Access Control)</h3>\n<p>Permissions are assigned to <strong>roles</strong>, and users are assigned to roles.</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-keyword\">const</span> permissions = {\n  <span class=\"hljs-attr\">admin</span>: [<span class=\"hljs-string\">&quot;create&quot;</span>, <span class=\"hljs-string\">&quot;read&quot;</span>, <span class=\"hljs-string\">&quot;update&quot;</span>, <span class=\"hljs-string\">&quot;delete&quot;</span>],\n  <span class=\"hljs-attr\">editor</span>: [<span class=\"hljs-string\">&quot;read&quot;</span>, <span class=\"hljs-string\">&quot;update&quot;</span>],\n  <span class=\"hljs-attr\">viewer</span>: [<span class=\"hljs-string\">&quot;read&quot;</span>],\n}\n\n<span class=\"hljs-keyword\">if</span> (permissions[user.<span class=\"hljs-property\">role</span>].<span class=\"hljs-title function_\">includes</span>(<span class=\"hljs-string\">&quot;update&quot;</span>)) {\n  <span class=\"hljs-comment\">// Allow action</span>\n}\n</code></pre><p><strong>Use RBAC when:</strong></p>\n<ul>\n<li>Your permissions map cleanly to job functions</li>\n<li>You have a manageable number of roles</li>\n<li>Permissions don&#39;t depend on resource data</li>\n</ul>\n<h3>ABAC (Attribute-Based Access Control)</h3>\n<p>Permissions are determined by <strong>attributes</strong> of the user, resource, action, and environment.</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-keyword\">const</span> canUpdate =\n  user.<span class=\"hljs-property\">role</span> === <span class=\"hljs-string\">&quot;editor&quot;</span> &amp;&amp;\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">status</span> !== <span class=\"hljs-string\">&quot;locked&quot;</span> &amp;&amp;\n  user.<span class=\"hljs-property\">department</span> === <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">department</span>\n\n<span class=\"hljs-keyword\">if</span> (canUpdate) {\n  <span class=\"hljs-comment\">// Allow action</span>\n}\n</code></pre><p><strong>Use ABAC when:</strong></p>\n<ul>\n<li>Permissions depend on resource properties</li>\n<li>You need fine-grained, contextual rules</li>\n<li>RBAC leads to too many roles</li>\n</ul>\n<h3>ReBAC (Relationship-Based Access Control)</h3>\n<p>Permissions are determined by <strong>relationships</strong> between users and resources.</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-comment\">// Can user view this document?</span>\n<span class=\"hljs-comment\">// Check: user â†’ team â†’ project â†’ folder â†’ document</span>\n<span class=\"hljs-keyword\">const</span> canView = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">checkRelationship</span>(user, <span class=\"hljs-string\">&quot;viewer&quot;</span>, <span class=\"hljs-variable language_\">document</span>)\n</code></pre><p><strong>Use ReBAC when:</strong></p>\n<ul>\n<li>Users share resources with each other</li>\n<li>Permissions inherit through hierarchies</li>\n<li>Your app is collaboration-focused</li>\n</ul>\n<h2>Quick Decision Guide</h2>\n<table>\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Recommended Model</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Simple app with admin/user roles</td>\n<td>RBAC</td>\n</tr>\n<tr>\n<td>Users can only edit their own content</td>\n<td>ABAC</td>\n</tr>\n<tr>\n<td>Permissions vary by department/location</td>\n<td>ABAC</td>\n</tr>\n<tr>\n<td>Google Drive-style sharing</td>\n<td>ReBAC</td>\n</tr>\n<tr>\n<td>Folder â†’ file permission inheritance</td>\n<td>ReBAC</td>\n</tr>\n<tr>\n<td>Enterprise with complex org structure</td>\n<td>ABAC or ReBAC</td>\n</tr>\n</tbody></table>\n<h2>They&#39;re Not Mutually Exclusive</h2>\n<p>Most real applications combine these models:</p>\n<pre><code class=\"hljs language-typescript\"><button class=\"copy-btn\">Copy</button><span class=\"hljs-comment\">// RBAC: Check role first</span>\n<span class=\"hljs-keyword\">if</span> (user.<span class=\"hljs-property\">role</span> === <span class=\"hljs-string\">&quot;admin&quot;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n\n<span class=\"hljs-comment\">// ABAC: Then check attributes</span>\n<span class=\"hljs-keyword\">if</span> (user.<span class=\"hljs-property\">role</span> === <span class=\"hljs-string\">&quot;editor&quot;</span> &amp;&amp; !<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">isLocked</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n\n<span class=\"hljs-comment\">// ReBAC: Finally check relationships</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">isSharedWith</span>(user, <span class=\"hljs-variable language_\">document</span>)) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>\n\n<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>\n</code></pre><h2>Key Takeaways</h2>\n<ol>\n<li><strong>Start simple</strong> - Begin with basic checks, refactor when needed</li>\n<li><strong>Centralize authorization</strong> - Use a permissions module or service layer</li>\n<li><strong>Consider libraries</strong> - CASL, Casbin, or managed services save time</li>\n<li><strong>Test your permissions</strong> - Authorization bugs are security bugs</li>\n<li><strong>Think about queries</strong> - Can you filter at the database level?</li>\n</ol>\n<h2>What We Built</h2>\n<p>Throughout this course, we evolved from scattered permission checks to a clean, scalable system:</p>\n<ol>\n<li><strong>Basic checks</strong> â†’ Scattered <code>if</code> statements</li>\n<li><strong>RBAC</strong> â†’ Role-based permission objects</li>\n<li><strong>ABAC</strong> â†’ Attribute conditions with a permission builder</li>\n<li><strong>Services layer</strong> â†’ Centralized auth with DB query generation</li>\n<li><strong>CASL</strong> â†’ Production-ready library</li>\n</ol>\n<p>Each step solved real problems while introducing patterns that scale.</p>\n<h2>Thank You!</h2>\n<p>You now have the knowledge to build permission systems that grow with your application. Whether you choose RBAC, ABAC, ReBAC, or a combinationâ€”you understand the tradeoffs and can make informed decisions.</p>\n<p>Happy coding! ðŸŽ‰</p>\n","markdown":"\nLet's recap what we've learned and when to use each approach.\n\n## The Three Models\n\n### RBAC (Role-Based Access Control)\n\nPermissions are assigned to **roles**, and users are assigned to roles.\n\n```typescript\nconst permissions = {\n  admin: [\"create\", \"read\", \"update\", \"delete\"],\n  editor: [\"read\", \"update\"],\n  viewer: [\"read\"],\n}\n\nif (permissions[user.role].includes(\"update\")) {\n  // Allow action\n}\n```\n\n**Use RBAC when:**\n\n- Your permissions map cleanly to job functions\n- You have a manageable number of roles\n- Permissions don't depend on resource data\n\n### ABAC (Attribute-Based Access Control)\n\nPermissions are determined by **attributes** of the user, resource, action, and environment.\n\n```typescript\nconst canUpdate =\n  user.role === \"editor\" &&\n  document.status !== \"locked\" &&\n  user.department === document.department\n\nif (canUpdate) {\n  // Allow action\n}\n```\n\n**Use ABAC when:**\n\n- Permissions depend on resource properties\n- You need fine-grained, contextual rules\n- RBAC leads to too many roles\n\n### ReBAC (Relationship-Based Access Control)\n\nPermissions are determined by **relationships** between users and resources.\n\n```typescript\n// Can user view this document?\n// Check: user â†’ team â†’ project â†’ folder â†’ document\nconst canView = await checkRelationship(user, \"viewer\", document)\n```\n\n**Use ReBAC when:**\n\n- Users share resources with each other\n- Permissions inherit through hierarchies\n- Your app is collaboration-focused\n\n## Quick Decision Guide\n\n| Scenario                                | Recommended Model |\n| --------------------------------------- | ----------------- |\n| Simple app with admin/user roles        | RBAC              |\n| Users can only edit their own content   | ABAC              |\n| Permissions vary by department/location | ABAC              |\n| Google Drive-style sharing              | ReBAC             |\n| Folder â†’ file permission inheritance    | ReBAC             |\n| Enterprise with complex org structure   | ABAC or ReBAC     |\n\n## They're Not Mutually Exclusive\n\nMost real applications combine these models:\n\n```typescript\n// RBAC: Check role first\nif (user.role === \"admin\") return true\n\n// ABAC: Then check attributes\nif (user.role === \"editor\" && !document.isLocked) return true\n\n// ReBAC: Finally check relationships\nif (await isSharedWith(user, document)) return true\n\nreturn false\n```\n\n## Key Takeaways\n\n1. **Start simple** - Begin with basic checks, refactor when needed\n2. **Centralize authorization** - Use a permissions module or service layer\n3. **Consider libraries** - CASL, Casbin, or managed services save time\n4. **Test your permissions** - Authorization bugs are security bugs\n5. **Think about queries** - Can you filter at the database level?\n\n## What We Built\n\nThroughout this course, we evolved from scattered permission checks to a clean, scalable system:\n\n1. **Basic checks** â†’ Scattered `if` statements\n2. **RBAC** â†’ Role-based permission objects\n3. **ABAC** â†’ Attribute conditions with a permission builder\n4. **Services layer** â†’ Centralized auth with DB query generation\n5. **CASL** â†’ Production-ready library\n\nEach step solved real problems while introducing patterns that scale.\n\n## Thank You!\n\nYou now have the knowledge to build permission systems that grow with your application. Whether you choose RBAC, ABAC, ReBAC, or a combinationâ€”you understand the tradeoffs and can make informed decisions.\n\nHappy coding! ðŸŽ‰\n","slug":"recap","title":"Choosing the Right Permission Model","section":"Conclusion","icon":"check","filePath":"/home/runner/work/fem-permission-systems-that-scale/fem-permission-systems-that-scale/lessons/07-conclusion/A-recap.md","nextSlug":null,"prevSlug":"/fem-permission-systems-that-scale/lessons/rebac/what-is-rebac"}},"__N_SSG":true}